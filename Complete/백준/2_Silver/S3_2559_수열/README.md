**📅 작성일**: 2025-10-14

## 🔗 문제 링크
[백준 2559번 - 수열](https://www.acmicpc.net/problem/2559)

---

## 🤔 접근법

연속된 K일 동안의 온도 합 중 최대값을 구하는 문제.

단순 반복문으로는 O(N × K)로 시간 초과 발생.

**핵심:** 누적합(Prefix Sum) 또는 슬라이딩 윈도우(Sliding Window)로 O(N) 최적화.

---

## 💡 정답 풀이 방법

### 🎯 방법 1: 슬라이딩 윈도우(Sliding Window) - 내 코드

1. **초기 윈도우** : 처음 K개의 합 계산

2. **윈도우 이동** : 새 원소 추가 + 맨 앞 원소 제거

3. **최대값 갱신** : 매 이동마다 최대값 비교

### 🎯 방법 2: 누적합(Prefix Sum) - 강사 정답 코드
※ 미리 누적 배열을 구해놓고, 'psum[i] - psum[i-k]'를 통해, 필요없는 이전 누적값을 빼는 방식
1. **누적합 배열 생성** : `psum[i] = arr[0] + arr[1] + ... + arr[i-1]`

2. **구간 합 계산** : `psum[i] - psum[i-k]`로 K개 연속 합 계산

3. **초기값 설정** : 모든 값이 음수일 경우를 대비해 `ret = -10000000`으로 시작

4. **최대값 갱신** : 모든 구간 합 중 최대값 찾기


---

## 🔑 핵심 개념

### 📐 누적합(Prefix Sum) 원리

```
배열: [3, -2, -4, -9, 0, 3, 7, 13, 8, -3]
누적합 psum:
  psum[0] = 0
  psum[1] = 3
  psum[2] = 3 + (-2) = 1
  psum[3] = 1 + (-4) = -3
  ...

K=2일 때 구간 합:
  psum[2] - psum[0] = 1 - 0 = 1      (3 + (-2))
  psum[3] - psum[1] = -3 - 3 = -6    ((-2) + (-4))
  psum[4] - psum[2] = -12 - 1 = -13  ((-4) + (-9))
  ...
```

**수식:**
```cpp
// i부터 j까지의 합 = psum[j+1] - psum[i]
// K개 연속 합 = psum[i] - psum[i-k]
```

### 🪟 슬라이딩 윈도우 원리

```
배열: [3, -2, -4, -9, 0, 3, 7, 13, 8, -3]
K=2

초기: [3, -2] → sum = 1
이동: [-2, -4] → sum = 1 - 3 + (-4) = -6
이동: [-4, -9] → sum = -6 - (-2) + (-9) = -13
...
```

**핵심 포인트:**
- 창문(윈도우)을 한 칸씩 오른쪽으로 이동
- 새 원소 추가 + 이전 원소 제거 = O(1)

---

## 🔍 두 방법 비교

| 항목 | 누적합 (Prefix Sum) | 슬라이딩 윈도우 (Sliding Window) |
|-----|-------------------|--------------------------------|
| **시간복잡도** | O(N) | O(N) |
| **공간복잡도** | O(N) - 누적합 배열 | O(N) - 원본 배열만 |
| **코드 간결성** | ★★★★☆ | ★★★★★ |
| **이해 난이도** | 중간 | 쉬움 |
| **특징** | 구간 합 문제에 범용적 | 고정 크기 윈도우 최적화 |

### 강사 코드의 장점
✅ **누적합의 본질적 이해**: `psum[i] - psum[i-k]` 공식 명확

✅ **확장성**: 다양한 구간 합 쿼리에 대응 가능

✅ **"맞왜틀" 방지**: 엣지 케이스 처리 철저 (음수 처리, 배열 크기)

---

## 🚨 "맞왜틀" 방지 포인트

### 1️⃣ 초기값 설정 오류

```cpp
❌ int ret = 0;  // 모든 온도가 음수일 때 틀림!

✅ int ret = -10000000;  // 가능한 최소값보다 작게 설정
```

**이유:**
- 온도 범위 : -100 ~ 100
- 최악의 경우 : -100 × 100,000 = -10,000,000
- 초기값을 0으로 하면 음수 합이 무시됨!

### 2️⃣ 배열 크기 설정

```cpp
❌ int psum[100000];  // N=100000일 때 psum[100000] 접근 → 범위 초과!

✅ int psum[100001];  // 1-based 인덱싱 대비
```

### 3️⃣ 인덱스 관리

```cpp
// 누적합 방식: 1-based 인덱싱
for (int i = 1; i <= n; i++)  // ✅ i=1부터 시작
    psum[i] = psum[i-1] + temp;

// 슬라이딩 윈도우: 0-based 인덱싱
for (int i = 0; i < N; i++)   // ✅ i=0부터 시작
    arr[i] = temp;
```

---

**⏱️ 시간복잡도**: O(N)
**💾 공간복잡도**: O(N)
